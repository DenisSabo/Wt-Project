<!DOCTYPE html>
<html>

<title>WT-Project</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/public/stylesheets/main.css">
<link rel="stylesheet" href="/public/stylesheets/fonts.googleapisRaleway.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/public/stylesheets/jquery.fancybox.css">
<style>
    body,h1,h2,h3,h4,h5,h6 {font-family: "Raleway", sans-serif}
</style>
<body class="light-grey content" style="max-width:1600px">
<div id="app">
<nav class="sidebar collapse white animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
    <div class="container">
        <a href="#" v-on:click="wt_close" class="hide-large right jumbo padding hover-grey" title="close menu">
            <i class="fa fa-remove"></i>
        </a>
        <img src="/public/pictures/guest.png" style="width:40%;" class="round"><br><br>
    </div>
    <div class="bar-block">
        <h4><button type="submit" v-on:click="GoogleRedirectLogin" class="bar-item button margin-bottom red"><i class="fa fa-google fa-fw"></i>&nbsp;&nbsp;&nbsp;Sign in with Google</button></h4>
    </div>   
    <div class="bar-block">
        <h4><button type="submit" v-on:click="GoogleRedirectRegister" class="bar-item button margin-bottom red"><i class="fa fa-google fa-fw"></i>&nbsp;&nbsp;&nbsp;Get an Account</button></h4>
    </div>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="overlay hide-large animate-opacity" v-on:click="wt_close" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="main" style="margin-left:300px">

    <!-- Header -->
    <header id="galery">
        <a href="#"><img src="/public/pictures/guest.png" style="width:65px;" class="circle right margin hide-large hover-opacity"></a>
        <span class="button hide-large xxlarge hover-text-grey" v-on:click="wt_open"><i class="fa fa-bars"></i></span>
        <div class="container">
            <h1><b>Picture galery</b></h1>
            <div class="section bottombar padding-16">
                <span class="margin-right">Filter:</span>
                <button class="button white" v-on:click="getRecentImages"><i class="fa fa-diamond margin-right"></i>Recent</button>
                <button class="button white hide-small" v-on:click="getPopularImages"><i class="fa fa-photo margin-right"></i>Popular</button>
                <button class="button white hide-small"><i class="fa fa-map-pin margin-right"></i>Categories</button>
            </div>
        </div>
    </header>

    <div class="row-padding">
        <paginate name="imagelist" :list="imagelist" :per="6">
            <div class="third container margin-bottom" v-for="entry in paginated('imagelist')">
                <a class="fancybox" rel="group" :href="entry.path">
                    <img v-bind:src="entry.path" alt="Juhu" style="width:100%; max-width:350px" class="hover-opacity">
                </a>
                <div class="container white" style="max-width:350px">
                    <p>
                        <b>{{ entry.title }}</b>
                    </p>
                    <p>{{ entry.description }}</p>
                </div>
            </div>
        </paginate>
    </div>
    <div class="pagination" v-if="imagelist.length > 6">  
        <paginate-links for="imagelist" :limit="3"></paginate-links>
    </div>
    <!-- Insert Photo Grid here-->
    
</div>
</div>
</body>
</html>

<script src="/public/javascript/jquery/jquery.js"></script>
<script src="/public/javascript/jquery.fancybox.js"></script>
<script src="/public/javascript/vue.js"></script>
<script src="/public/javascript/vue-paginate.js"></script>
<script>
    $(document).ready(function() {
        $(".fancybox").fancybox();
        $(".number a").click(function(){
            console.log('scroll to destination');

            $('html, body').animate({
                scrollTop: $($("#galery")).offset().top + "px"
                }, 1000);
        });
	});


    // Script to _open and _close sidebar
    new Vue({
        el: '#app',
        data: {
            imagelist : [],
            paginate: ['imagelist']
        },
        created: function(){
            this.getPopularImages();
        },
        methods: {
            getPopularImages: function(){
                var self = this;
                $.getJSON(window.location.origin + "/images/filter/popular", function(result){ 
                    self.imagelist = result;
                });
            },
            getRecentImages: function(){
                var self = this;
                $.getJSON(window.location.origin + "/images/filter/newest", function(result){ 
                    self.imagelist = result;
                });
            },
            wt_open: function() {
                document.getElementById("mySidebar").style.display = "block";
                document.getElementById("myOverlay").style.display = "block";
            },
            wt_close: function() {
                document.getElementById("mySidebar").style.display = "none";
                document.getElementById("myOverlay").style.display = "none";
            },
            GoogleRedirectLogin: function() {
                window.location = window.location.origin + "/auth/login";
            },
            GoogleRedirectRegister: function() {
                window.location = "https://accounts.google.com/SignUp";
            }
        }
    })
</script>